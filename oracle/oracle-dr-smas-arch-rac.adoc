---
sidebar: sidebar 
permalink: oracle/oracle-dr-smas-arch-rac.html 
keywords: oracle, active sync, extended rac, RAC 
summary: SnapMirror 활성 동기화를 사용하는 Oracle RAC 확장 
---
= SnapMirror 활성 동기화를 사용하는 Oracle RAC 확장
:allow-uri-read: 


[role="lead"]
많은 고객이 사이트 간에 Oracle RAC 클러스터를 확장하여 완벽한 Active-Active 구성을 실현함으로써 RTO를 최적화합니다. Oracle RAC의 쿼럼 관리를 포함해야 하기 때문에 전체 설계가 더 복잡해집니다.

기존의 확장된 RAC 클러스터에서는 ASM 미러링에 의존하여 데이터 보호를 제공했습니다. 이 접근 방식은 효과가 있지만 많은 수동 구성 단계가 필요하며 네트워크 인프라에 오버헤드를 발생시킵니다. 반면, SnapMirror Active Sync가 데이터 복제에 대한 책임을 지도록 하면 솔루션이 크게 간소화됩니다. 동기화, 중단 후 재동기화, 장애 복구, 쿼럼 관리 등의 작업이 더 쉬워지고 SAN을 여러 사이트에 분산할 필요가 없어 SAN 설계 및 관리가 간소화됩니다.



== 복제

SnapMirror Active Sync의 RAC 기능을 이해하는 데 중요한 것은 미러링된 스토리지에서 호스팅되는 단일 LUN 세트로 스토리지를 보는 것입니다. 예를 들면 다음과 같습니다.

image:smas-oracle-logical.png["Oracle 논리적 액세스"]

운영 복사본 또는 미러 복사본이 없습니다. 논리적으로, 각 LUN에는 단일 복제본만 있으며, 이 LUN은 서로 다른 두 스토리지 시스템에 있는 SAN 경로에서 사용할 수 있습니다. 호스트 관점에서 볼 때 스토리지 페일오버가 발생하지 않고 경로 변경이 있습니다. 다양한 장애 이벤트로 인해 다른 경로가 온라인 상태로 유지되는 동안 LUN에 대한 특정 경로가 손실될 수 있습니다. SnapMirror 활성 동기화는 모든 운영 경로에 대해 동일한 데이터를 사용할 수 있도록 보장합니다.



== 스토리지 구성

이 예제 구성에서는 ASM 디스크가 엔터프라이즈 스토리지의 단일 사이트 RAC 구성과 동일하게 구성됩니다. 스토리지 시스템이 데이터 보호를 제공하기 때문에 ASM 외부 중복성이 사용됩니다.



== 균일 액세스 대 비정보 액세스

SnapMirror 액티브 동기화에서 Oracle RAC와 관련하여 가장 중요한 고려사항은 균일한 액세스를 사용하는지 비균일한 액세스를 사용하는지 여부입니다.

균일한 액세스는 각 호스트가 두 클러스터 모두에서 경로를 볼 수 있음을 의미합니다. 비균일 액세스는 호스트가 로컬 클러스터에 대한 경로만 볼 수 있음을 의미합니다.

두 옵션은 특별히 권장되거나 권장되지 않습니다. 일부 고객은 사이트에 쉽게 연결할 수 있는 다크 파이버를 보유하고 있으며, 다른 고객은 이러한 연결을 보유하고 있지 않거나 SAN 인프라스트럭처가 장거리 ISL을 지원하지 않습니다.



== 비균일 액세스

비균일 액세스는 SAN 관점에서 구성하는 것이 더 간단합니다.

image:smas-oracle-rac-nonuniform.png["Oracle RAC 비균일 액세스"]

기본 단점은 link:oracle-dr-smas-nonuniform.html["비균일 액세스"]사이트 간 ONTAP 연결이 끊어지거나 스토리지 시스템이 손실되면 한 사이트에서 데이터베이스 인스턴스가 손실된다는 것입니다. 이는 바람직한 방법은 아니지만 좀 더 단순한 SAN 구성을 위한 대가로 허용 가능한 위험일 수 있습니다.



== 균일한 액세스

단일 액세스를 사용하려면 사이트 간에 SAN을 확장해야 합니다. 주된 이점은 스토리지 시스템의 손실로 인해 데이터베이스 인스턴스가 손실되지는 않는다는 것입니다. 대신, 경로가 현재 사용 중인 다중 경로가 변경됩니다.

여러 가지 방법으로 비균일 액세스를 구성할 수 있습니다.


NOTE: 아래 다이어그램에는 단순한 컨트롤러 장애 시 사용되는 활성 경로이지만 최적화되지 않은 경로가 있지만 다이어그램을 단순화하기 위해 이러한 경로가 표시되지 않습니다.



=== 근접 설정이 있는 AFF

사이트 간에 지연 시간이 클 경우 호스트 근접 설정을 사용하여 AFF 시스템을 구성할 수 있습니다. 따라서 각 스토리지 시스템에서 로컬인 호스트와 원격인 호스트를 인식하고 경로 우선 순위를 적절하게 할당할 수 있습니다.

image:smas-oracle-rac-uniform-prox.png["액세스 범위가 균일한 RAC"]

정상 작동 시 각 Oracle 인스턴스는 로컬 활성/최적화된 경로를 우선적으로 사용합니다. 결과적으로 블록의 로컬 복제본이 모든 읽기를 서비스합니다. 따라서 지연 시간이 가장 짧아집니다. 마찬가지로 쓰기 입출력도 로컬 컨트롤러로 하향 전송됩니다. 입출력이 확인되기 전에 복제되어야 하므로 사이트 간 네트워크를 가로지르는 데 추가적인 지연 시간이 발생하지만 동기식 복제 솔루션에서는 이를 방지할 수 없습니다.



=== 근접 설정이 없는 ASA/AFF

사이트 간에 심각한 지연 시간이 없다면 호스트 근접 설정 없이 AFF 시스템을 구성하거나 ASA를 사용할 수 있습니다.

image:smas-oracle-rac-uniform.png["액세스 범위가 균일한 RAC"]

각 호스트는 두 스토리지 시스템에서 모든 운영 경로를 사용할 수 있습니다. 따라서 각 호스트가 하나의 클러스터가 아닌 두 클러스터의 성능 잠재력을 활용할 수 있으므로 성능이 크게 향상됩니다.

ASA를 사용하면 두 클러스터에 대한 모든 경로를 활성 및 최적화된 것으로 간주할 뿐만 아니라 파트너 컨트롤러의 경로도 활성 상태로 간주됩니다. 그 결과 항상 전체 클러스터에서 All-Active SAN 경로가 됩니다.


NOTE: ASA 시스템은 비균일 액세스 구성에서도 사용할 수 있습니다. 사이트 간 경로가 없으므로 ISL을 통한 입출력으로 인해 성능에 영향을 미치지 않습니다.
